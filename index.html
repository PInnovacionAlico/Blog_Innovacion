<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog de Innovación | Alico</title>

    <!-- Favicon -->
    <link rel="icon" href="assets/images/Ali_head.png" type="image/png">
    <link rel="apple-touch-icon" href="assets/images/Ali_head.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zilla+Slab:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Work+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    
    <!-- Estilos principales - RUTAS CORREGIDAS -->
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/accessibility.css">
    <link rel="stylesheet" href="css/blog-styles.css">
    <link rel="stylesheet" href="css/blog-adjustments.css">
    
    <!-- CMS Netlify -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    
    <!-- CSS crítico inline -->
    <style>
        /* === VARIABLES DE COLORES CORPORATIVOS === */
        :root {
            /* Colores principales - Valores exactos del manual */
            --amarillo-oro: #DB9500;        
            --azul-novo: #003DA6;           
            --azul-claro: #40B4E5;          
            --verde-natura: #71B338;        
            --marron-corporativo: #683026;  
            
            /* Variaciones de amarillo oro */
            --amarillo-oro-90: #DFA01A;
            --amarillo-oro-80: #E2AA33;
            --amarillo-oro-70: #E6B54D;
            --amarillo-oro-60: #E9BF66;
            --amarillo-oro-50: #EDCA7F;
            --amarillo-oro-40: #F1D599;
            --amarillo-oro-30: #F4DFB2;
            --amarillo-oro-20: #F8EACC;
            --amarillo-oro-10: #FBF4E5;
            
            /* Variaciones de azul novo */
            --azul-novo-90: #1A52B8;
            --azul-novo-80: #3367CA;
            --azul-novo-70: #4D7CDC;
            --azul-novo-60: #6691EE;
            --azul-novo-50: #80A6FF;
            --azul-novo-40: #99BBFF;
            --azul-novo-30: #B3D0FF;
            --azul-novo-20: #CCE5FF;
            --azul-novo-10: #E6F2FF;
            
            /* Variaciones de azul claro */
            --azul-claro-90: #52BAEA;
            --azul-claro-80: #66C2EC;
            --azul-claro-70: #7ACAEF;
            --azul-claro-60: #8ED2F1;
            --azul-claro-50: #A2DAF4;
            --azul-claro-40: #B6E2F6;
            --azul-claro-30: #CAEAF9;
            --azul-claro-20: #DEF2FB;
            --azul-claro-10: #F2F9FD;
            
            /* Variaciones de verde natura */
            --verde-natura-90: #7FBB4C;
            --verde-natura-80: #8DC360;
            --verde-natura-70: #9BCB74;
            --verde-natura-60: #A9D388;
            --verde-natura-50: #B7DB9C;
            --verde-natura-40: #C5E3B0;
            --verde-natura-30: #D3EBC4;
            --verde-natura-20: #E1F3D8;
            --verde-natura-10: #F0F9EC;
            
            /* Colores neutros */
            --blanco: #FFFFFF;
            --negro: #000000;
            --gris-claro: #F5F5F5;
            --gris-medio: #CCCCCC;
            --gris-oscuro: #666666;
            
            /* Espaciado */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --spacing-xxl: 48px;
            
            /* Bordes redondeados */
            --border-radius-sm: 8px;
            --border-radius-md: 12px;
            --border-radius-lg: 20px;
            --border-radius-xl: 25px;
            
            /* Sombras */
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 8px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 16px rgba(0,0,0,0.2);
            --shadow-xl: 0 12px 24px rgba(0,0,0,0.25);
        }

        /* === CRÍTICO: Anti-FOUC === */
        body { 
            opacity: 0; 
            transition: opacity 0.3s ease;
            font-family: 'Work Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--azul-novo);
            min-height: 100vh;
            padding: 0;
            margin: 0;
            line-height: 1.6;
            color: var(--negro);
        }
        
        body.components-loaded { opacity: 1; }
        
        /* === CRÍTICO: Botón accesibilidad === */
        .accessibility-toggle {
            position: fixed; 
            top: 30px; 
            right: 30px; 
            background: linear-gradient(135deg, var(--verde-natura) 0%, var(--verde-natura-80) 100%);
            color: white; 
            width: 60px; 
            height: 60px; 
            border-radius: 50%; 
            border: none; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            cursor: pointer; 
            font-size: 28px; 
            box-shadow: 0 4px 20px rgba(113, 179, 56, 0.4); 
            z-index: 999; 
            transition: all 0.3s ease;
        }
        .accessibility-toggle:hover { transform: scale(1.1); }

        /* === RESET BÁSICO === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* === MAIN CONTENT === */
        main {
            padding: var(--spacing-xl) var(--spacing-lg);
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
    </style>
</head>
<body>
    <!-- Sistema de Accesibilidad -->
    <!-- Botón flotante de accesibilidad -->
    <button class="accessibility-toggle" id="accessibilityToggle" onclick="toggleAccessibilityPanel()" aria-label="Abrir opciones de accesibilidad" title="Accesibilidad (Alt+A)">
        <span class="material-symbols-rounded">accessibility</span>
    </button>

    <!-- Overlay -->
    <div class="accessibility-overlay" id="accessibilityOverlay" onclick="toggleAccessibilityPanel()"></div>

    <!-- Panel de accesibilidad -->
    <div class="accessibility-panel" id="accessibilityPanel" role="dialog" aria-labelledby="accessibility-title" aria-hidden="true">
        <!-- Header del panel -->
        <div class="accessibility-header">
            <h3 id="accessibility-title">
                <span class="material-symbols-rounded">accessibility</span>
                Accesibilidad
            </h3>
            <button class="accessibility-close" onclick="toggleAccessibilityPanel()" aria-label="Cerrar panel">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>

        <!-- Contenido del panel -->
        <div class="accessibility-options">
            <!-- Tamaño de fuente -->
            <div class="accessibility-group">
                <h4>
                    <span class="material-symbols-rounded">format_size</span>
                    Tamaño de texto
                </h4>
                <div class="font-size-controls">
                    <button onclick="adjustFontSize('decrease')" aria-label="Disminuir texto">A-</button>
                    <button onclick="resetFontSize()" aria-label="Texto normal">A</button>
                    <button onclick="adjustFontSize('increase')" aria-label="Aumentar texto">A+</button>
                </div>
            </div>

            <!-- Opciones visuales -->
            <div class="accessibility-group">
                <h4>
                    <span class="material-symbols-rounded">visibility</span>
                    Opciones visuales
                </h4>
                <div class="accessibility-toggles">
                    <label class="accessibility-toggle-item">
                        <input type="checkbox" id="darkMode" onchange="toggleDarkMode()">
                        <div class="toggle-slider"></div>
                        <span class="toggle-label">Modo oscuro</span>
                    </label>
                </div>
            </div>

            <!-- Funciones adicionales -->
            <div class="accessibility-group">
                <h4>
                    <span class="material-symbols-rounded">settings</span>
                    Funciones
                </h4>
                <div class="accessibility-buttons">
                    <button id="ttsButton" onclick="toggleTextToSpeech()">
                        <span class="material-symbols-rounded">volume_up</span>
                        Lectura por párrafos y títulos
                    </button>
                    
                    <button onclick="showKeyboardShortcuts()">
                        <span class="material-symbols-rounded">keyboard</span>
                        Atajos de teclado
                    </button>
                    
                    <div class="keyboard-shortcuts-info">
                        <small>
                            <strong>Atajos:</strong><br>
                            • <kbd>Ctrl/Cmd + +</kbd> Aumentar texto<br>
                            • <kbd>Ctrl/Cmd + -</kbd> Disminuir texto<br>
                            • <kbd>Ctrl/Cmd + 0</kbd> Texto normal<br>
                            • <kbd>Ctrl/Cmd + Shift + Q</kbd> Parar TTS<br>
                            • <kbd>Ctrl/Cmd + Shift + R</kbd> Toggle TTS
                        </small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Botón de reset -->
        <div class="accessibility-reset">
            <button class="reset-button" onclick="resetAllSettings()">
                <span class="material-symbols-rounded">refresh</span>
                Restaurar configuración
            </button>
        </div>
    </div>

    <!-- Botón de volver arriba -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()" aria-label="Volver arriba">
        <span class="material-symbols-rounded">keyboard_arrow_up</span>
    </button>

    <!-- Contenido principal -->
    <main id="main-content">
        <!-- Breadcrumb -->
        <nav class="breadcrumb" aria-label="Navegación de ruta">
            <div class="breadcrumb-nav">
                <a href="https://alico-innovacion.netlify.app/" class="breadcrumb-link">Inicio</a>
                <span class="breadcrumb-separator">›</span>
                <span class="breadcrumb-current" aria-current="page">Blog</span>
            </div>
        </nav>
        
        <!-- Banner principal -->
        <section class="banner-section">
            <div class="banner-content banner-blog">
                BLOG DE INNOVACIÓN
            </div>
        </section>

        <!-- Descripción -->
        <section class="model-card">
            <h2>Últimas Noticias y Artículos</h2>
            <p>Mantente al día con las últimas novedades, proyectos y avances en innovación de Alico. Nuestro blog te trae contenido exclusivo sobre sostenibilidad, tecnología y el futuro del packaging.</p>
        </section>

        <!-- Filtros y búsqueda -->
        <section class="blog-filters">
            <div class="filters-container">
                <div class="search-box">
                    <span class="material-symbols-rounded search-icon">search</span>
                    <input type="text" id="searchInput" placeholder="Buscar artículos..." aria-label="Buscar artículos">
                </div>
                
                <div class="category-filters">
                    <button class="filter-btn active" data-category="todos">Todos</button>
                    <button class="filter-btn" data-category="innovacion">Innovación</button>
                    <button class="filter-btn" data-category="sostenibilidad">Sostenibilidad</button>
                    <button class="filter-btn" data-category="tecnologia">Tecnología</button>
                    <button class="filter-btn" data-category="proyectos">Proyectos</button>
                </div>
            </div>
        </section>

        <!-- Grid de artículos -->
        <section class="blog-grid" id="blogGrid">
            <!-- Los artículos se cargarán dinámicamente aquí -->
        </section>

        <!-- Paginación -->
        <section class="pagination" id="pagination">
            <!-- La paginación se generará dinámicamente -->
        </section>

        <!-- Botón CMS para administradores -->
        <div class="cms-admin" id="cmsAdmin" style="display: none;">
            <button class="cms-button" onclick="openCMS()">
                <span class="material-symbols-rounded">edit</span>
                Administrar Blog
            </button>
        </div>
    </main>

    <!-- Footer -->
    <footer id="footer">
        <div class="footer-logo-container">
            <img src="assets/images/logo-blanco.png" 
                 alt="Alico Logo" 
                 class="footer-logo-image"
                 onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
            <div class="footer-logo-fallback">alico</div>
        </div>
    </footer>

    <!-- Scripts esenciales - RUTAS CORREGIDAS -->
    <script src="assets/js/scripts.js"></script>
    <script src="assets/js/accessibility.js"></script>
    <script src="js/blog-cms.js"></script>
    <script src="js/blog-main.js"></script>
    
    <!-- Script para Netlify CMS -->
    <script>
        if (window.netlifyIdentity) {
            window.netlifyIdentity.on("init", user => {
                if (!user) {
                    window.netlifyIdentity.on("login", () => {
                        document.getElementById("cmsAdmin").style.display = "block";
                    });
                } else {
                    document.getElementById("cmsAdmin").style.display = "block";
                }
            });
        }

        // Función básica para scrollToTop
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Función básica para toggleAccessibilityPanel
        function toggleAccessibilityPanel() {
            const panel = document.getElementById('accessibilityPanel');
            const overlay = document.getElementById('accessibilityOverlay');
            
            if (panel && overlay) {
                const isOpen = panel.classList.contains('show');
                
                if (isOpen) {
                    panel.classList.remove('show');
                    overlay.classList.remove('show');
                    panel.setAttribute('aria-hidden', 'true');
                } else {
                    panel.classList.add('show');
                    overlay.classList.add('show');
                    panel.setAttribute('aria-hidden', 'false');
                }
            }
        }

        // Función básica para adjustFontSize
        function adjustFontSize(action) {
            const html = document.documentElement;
            let currentSize = parseFloat(getComputedStyle(html).fontSize);
            
            switch(action) {
                case 'increase':
                    currentSize = Math.min(currentSize + 2, 24);
                    break;
                case 'decrease':
                    currentSize = Math.max(currentSize - 2, 12);
                    break;
            }
            
            html.style.fontSize = currentSize + 'px';
        }

        // Función básica para resetFontSize
        function resetFontSize() {
            document.documentElement.style.fontSize = '';
        }

        // Función básica para toggleDarkMode
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }

        // Función básica para toggleTextToSpeech
        function toggleTextToSpeech() {
            console.log('TTS toggle - función básica');
        }

        // Función básica para showKeyboardShortcuts
        function showKeyboardShortcuts() {
            alert('Atajos de teclado mostrados en el panel');
        }

        // Función básica para resetAllSettings
        function resetAllSettings() {
            document.body.classList.remove('dark-mode');
            resetFontSize();
            console.log('Configuraciones restauradas');
        }

        // Mostrar/ocultar back-to-top
        window.addEventListener('scroll', function() {
            const backToTop = document.getElementById('backToTop');
            if (backToTop) {
                if (window.pageYOffset > 100) {
                    backToTop.classList.add('visible');
                    backToTop.style.display = 'flex';
                } else {
                    backToTop.classList.remove('visible');
                    backToTop.style.display = 'none';
                }
            }
        });

        // Inicialización de la página
        document.addEventListener('DOMContentLoaded', function() {
            // Marcar componentes como cargados
            setTimeout(() => {
                document.body.classList.add('components-loaded');
                console.log('✅ Blog inicializado con componentes mínimos');
            }, 300);

            // Verificar breadcrumb
            const breadcrumb = document.querySelector('.breadcrumb');
            if (breadcrumb) {
                console.log('✅ Breadcrumb encontrado y visible');
            }

            console.log('🎨 Blog cargado exitosamente');
        });
    </script>
</body>
</html>
